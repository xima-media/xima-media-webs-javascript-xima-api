var XIMA={api:{}};window.initOverlappingMarkerSpiderfier=function(){var e=!0,t=null,i=!1;(function(){var n,r={}.hasOwnProperty,o=[].slice;((n=this.google)!=t?n.maps:void 0)!=t&&(this.OverlappingMarkerSpiderfier=function(){function n(e,i){var n,o,s,l,p=this;this.map=e,i==t&&(i={});for(n in i)r.call(i,n)&&(o=i[n],this[n]=o);for(this.e=new this.constructor.g(this.map),this.n(),this.b={},o=0,s=(l=["click","zoom_changed","maptypeid_changed"]).length;o<s;o++)n=l[o],a.addListener(this.map,n,function(){return p.unspiderfy()})}var a,s,l,p,c,u,h,g;for(p=0,c=(g=[n,u=n.prototype]).length;p<c;p++)l=g[p],l.VERSION="0.3.3";return s=google.maps,a=s.event,c=s.MapTypeId,h=2*Math.PI,u.keepSpiderfied=i,u.markersWontHide=i,u.markersWontMove=i,u.nearbyDistance=20,u.circleSpiralSwitchover=9,u.circleFootSeparation=23,u.circleStartAngle=h/12,u.spiralFootSeparation=26,u.spiralLengthStart=11,u.spiralLengthFactor=4,u.spiderfiedZIndex=1e3,u.usualLegZIndex=10,u.highlightedLegZIndex=20,u.legWeight=1.5,u.legColors={usual:{},highlighted:{}},p=u.legColors.usual,l=u.legColors.highlighted,p[c.HYBRID]=p[c.SATELLITE]="#fff",l[c.HYBRID]=l[c.SATELLITE]="#f00",p[c.TERRAIN]=p[c.ROADMAP]="#444",l[c.TERRAIN]=l[c.ROADMAP]="#f00",u.n=function(){this.a=[],this.j=[]},u.addMarker=function(n){var r,o=this;return n._oms!=t?this:(n._oms=e,r=[a.addListener(n,"click",function(e){return o.F(n,e)})],this.markersWontHide||r.push(a.addListener(n,"visible_changed",function(){return o.o(n,i)})),this.markersWontMove||r.push(a.addListener(n,"position_changed",function(){return o.o(n,e)})),this.j.push(r),this.a.push(n),this)},u.o=function(e,i){if(e._omsData!=t&&(i||!e.getVisible())&&this.s==t&&this.t==t)return this.unspiderfy(i?e:t)},u.getMarkers=function(){return this.a.slice(0)},u.removeMarker=function(e){var i,n,r,o,s;if(e._omsData!=t&&this.unspiderfy(),0>(i=this.m(this.a,e)))return this;for(o=0,s=(r=this.j.splice(i,1)[0]).length;o<s;o++)n=r[o],a.removeListener(n);return delete e._oms,this.a.splice(i,1),this},u.clearMarkers=function(){var e,t,i,n,r,o,s,l;for(this.unspiderfy(),e=n=0,o=(l=this.a).length;n<o;e=++n){for(i=l[e],r=0,s=(t=this.j[e]).length;r<s;r++)e=t[r],a.removeListener(e);delete i._oms}return this.n(),this},u.addListener=function(e,i){var n,r;return((r=(n=this.b)[e])!=t?r:n[e]=[]).push(i),this},u.removeListener=function(e,t){var i;return 0>(i=this.m(this.b[e],t))||this.b[e].splice(i,1),this},u.clearListeners=function(e){return this.b[e]=[],this},u.trigger=function(){var e,i,n,r,a,s;for(i=arguments[0],e=2<=arguments.length?o.call(arguments,1):[],s=[],r=0,a=(i=(n=this.b[i])!=t?n:[]).length;r<a;r++)n=i[r],s.push(n.apply(t,e));return s},u.u=function(e,t){var i,n,r,o,a;for(r=this.circleFootSeparation*(2+e)/h,n=h/e,a=[],i=o=0;0<=e?o<e:o>e;i=0<=e?++o:--o)i=this.circleStartAngle+i*n,a.push(new s.Point(t.x+r*Math.cos(i),t.y+r*Math.sin(i)));return a},u.v=function(e,t){var i,n,r,o,a;for(r=this.spiralLengthStart,i=0,a=[],n=o=0;0<=e?o<e:o>e;n=0<=e?++o:--o)i+=this.spiralFootSeparation/r+5e-4*n,n=new s.Point(t.x+r*Math.cos(i),t.y+r*Math.sin(i)),r+=h*this.spiralLengthFactor/i,a.push(n);return a},u.F=function(e,i){var n,r,o,a,s,l,p,c,u;if((!(a=e._omsData!=t)||!this.keepSpiderfied)&&this.unspiderfy(),a||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,i);for(a=[],s=[],l=(n=this.nearbyDistance)*n,o=this.c(e.position),p=0,c=(u=this.a).length;p<c;p++)(n=u[p]).map!=t&&n.getVisible()&&(r=this.c(n.position),this.f(r,o)<l?a.push({A:n,p:r}):s.push(n));return 1===a.length?this.trigger("click",e,i):this.G(a,s)},u.markersNearMarker=function(e,n){var r,o,a,s,l,p,c,u,h,g;if(n==t&&(n=i),this.e.getProjection()==t)throw"Must wait for 'idle' event on map before calling markersNearMarker";for(l=(r=this.nearbyDistance)*r,a=this.c(e.position),s=[],p=0,c=(u=this.a).length;p<c&&!((r=u[p])!==e&&r.map!=t&&r.getVisible()&&(o=this.c((h=(g=r._omsData)!=t?g.l:void 0)!=t?h:r.position),this.f(o,a)<l&&(s.push(r),n)));p++);return s},u.markersNearAnyOtherMarker=function(){var n,r,o,a,s,l,p,c,u,h,g,d;if(this.e.getProjection()==t)throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(n=(l=this.nearbyDistance)*l,l=[],g=0,o=(a=this.a).length;g<o;g++)r=a[g],l.push({q:this.c((p=(u=r._omsData)!=t?u.l:void 0)!=t?p:r.position),d:i});for(r=p=0,u=(g=this.a).length;p<u;r=++p)if((o=g[r]).map!=t&&o.getVisible()&&!(a=l[r]).d)for(o=c=0,h=(d=this.a).length;c<h;o=++c)if(s=d[o],o!==r&&s.map!=t&&s.getVisible()&&(s=l[o],(!(o<r)||s.d)&&this.f(a.q,s.q)<n)){a.d=s.d=e;break}for(o=[],n=p=0,u=(g=this.a).length;p<u;n=++p)r=g[n],l[n].d&&o.push(r);return o},u.z=function(e){var t=this;return{h:function(){return e._omsData.i.setOptions({strokeColor:t.legColors.highlighted[t.map.mapTypeId],zIndex:t.highlightedLegZIndex})},k:function(){return e._omsData.i.setOptions({strokeColor:t.legColors.usual[t.map.mapTypeId],zIndex:t.usualLegZIndex})}}},u.G=function(t,i){var n,r,o,l,p,c,u,h,g,d;return this.s=e,d=t.length,n=this.C(function(){var e,i,n;for(n=[],e=0,i=t.length;e<i;e++)h=t[e],n.push(h.p);return n}()),l=d>=this.circleSpiralSwitchover?this.v(d,n).reverse():this.u(d,n),n=function(){var e,i,n,h=this;for(n=[],e=0,i=l.length;e<i;e++)o=l[e],r=this.D(o),g=this.B(t,function(e){return h.f(e.p,o)}),u=g.A,c=new s.Polyline({map:this.map,path:[u.position,r],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),u._omsData={l:u.position,i:c},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(p=this.z(u),u._omsData.w={h:a.addListener(u,"mouseover",p.h),k:a.addListener(u,"mouseout",p.k)}),u.setPosition(r),u.setZIndex(Math.round(this.spiderfiedZIndex+o.y)),n.push(u);return n}.call(this),delete this.s,this.r=e,this.trigger("spiderfy",n,i)},u.unspiderfy=function(i){var n,r,o,s,l,p,c;if(i==t&&(i=t),this.r==t)return this;for(this.t=e,s=[],o=[],l=0,p=(c=this.a).length;l<p;l++)(r=c[l])._omsData!=t?(r._omsData.i.setMap(t),r!==i&&r.setPosition(r._omsData.l),r.setZIndex(t),(n=r._omsData.w)!=t&&(a.removeListener(n.h),a.removeListener(n.k)),delete r._omsData,s.push(r)):o.push(r);return delete this.t,delete this.r,this.trigger("unspiderfy",s,o),this},u.f=function(e,t){var i,n;return i=e.x-t.x,n=e.y-t.y,i*i+n*n},u.C=function(e){var t,i,n,r,o;for(r=i=n=0,o=e.length;r<o;r++)t=e[r],i+=t.x,n+=t.y;return e=e.length,new s.Point(i/e,n/e)},u.c=function(e){return this.e.getProjection().fromLatLngToDivPixel(e)},u.D=function(e){return this.e.getProjection().fromDivPixelToLatLng(e)},u.B=function(e,i){var n,r,o,a,s,l;for(o=s=0,l=e.length;s<l;o=++s)a=e[o],a=i(a),(void 0===n||n===t||a<r)&&(r=a,n=o);return e.splice(n,1)[0]},u.m=function(e,i){var n,r,o;if(e.indexOf!=t)return e.indexOf(i);for(n=r=0,o=e.length;r<o;n=++r)if(e[n]===i)return n;return-1},n.g=function(e){return this.setMap(e)},n.g.prototype=new s.OverlayView,n.g.prototype.draw=function(){},n}())}).call(this)},XIMA.api.dsgvo=function(e,t,i,n){var r={},o=!1,a={map:{debug:!1,scriptUrl:null,scriptUrlSelector:".map-script-url",mapStorageIdentifier:"ximaMapState",useGlobal:!1,useCanvasHint:!0,switchElement:null,canvasElements:[],callback:function(){},canvasHint:{msg:"Karten sind standardmäßig deaktiviert. Klicken Sie hier, um den Datenschutzbestimmungen zuzustimmen und die Karte anzeigen zu lassen.",style:{backgroundColor:"rgba(0,0,0,0.5)",textColor:"#dddddd",textSize:"12px",iconUrl:null},className:null}}},s="."+a.map.canvasHint.className;return r.initialize=function(e){return e&&jQuery.extend(a.map,e.map),"true"===r.getState(a.map.mapStorageIdentifier)?(o=!0,r.loadScript()):r.hideCanvasElements(),r.initEventListener(),a.map.switchElement&&i(a.map.switchElement).length&&i(a.map.switchElement).prop("checked","true"===r.getState(a.map.mapStorageIdentifier)),this},r.loadScript=function(){var e="";a.map.scriptUrl?e=a.map.scriptUrl:i(a.map.scriptUrlSelector).length?e=i(a.map.scriptUrlSelector).attr("data-url"):a.map.debug&&console.log("[XIMA.api.dsgvo] no script url provided"),""!==e&&jQuery.getScript(e).done(function(){a.map.debug&&console.log("[XIMA.api.dsgvo] loading script: "+e),a.map.debug&&console.log("[XIMA.api.dsgvo] map script loaded"),a.map.callback()}).fail(function(e,t,i){a.map.debug&&console.log("[XIMA.api.dsgvo] getScript failed")})},r.initEventListener=function(){a.map.switchElement&&a.map.useGlobal&&(i(a.map.switchElement).unbind(),i(a.map.switchElement).change(function(e){a.map.debug&&console.log("[XIMA.api.dsgvo] switch maps representation state to: "+i(this).is(":checked")),r.setState(a.map.mapStorageIdentifier,i(this).is(":checked")),i(this).is(":checked")&&r.loadScript()})),i(s).length&&(i(s).unbind(),i(s).on("click",function(e){o||(a.map.debug&&console.log("[XIMA.api.dsgvo] activate maps representation by clicking the hint"),i(s).fadeOut(function(){i(this).remove()}),r.loadScript(),o=!0,a.map.useGlobal&&(r.setState(a.map.mapStorageIdentifier,!0),i(a.map.switchElement).prop("checked","true"===r.getState(a.map.mapStorageIdentifier))))}))},r.hideCanvasElements=function(){o||i.each(a.map.canvasElements,function(e,t){if(i(t).length){i(t).css("background-color",a.map.canvasHint.style.backgroundColor),i(t).css("color",a.map.canvasHint.style.textColor),i(t).css("font-size",a.map.canvasHint.style.textSize),i(t).hover(function(){i(this).css("cursor","pointer")});var n=a.map.canvasHint.style.iconUrl?'<img src="'+a.map.canvasHint.style.iconUrl+'" style="width: 50px; margin-bottom: 20px;" alt="Forbidden map" />':'<?xml version="1.0" ?><!DOCTYPE svg  PUBLIC \'-//W3C//DTD SVG 1.1//EN\'  \'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\'><svg enable-background="new 0 0 26 26" id="map" version="1.1" viewBox="0 0 26 26" width="100px" height="100px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M24.9021606,21.0473633c0.0229492-0.0432129,0.0421753-0.0855103,0.0563354-0.1323242   c0.0135498-0.0444336,0.0206909-0.088562,0.0258179-0.1355591c0.0056152-0.0511475,0.0065308-0.1004639,0.0014038-0.1525879   c-0.0022583-0.0233154,0.005127-0.0452881,0.0006104-0.0687866l-1.8310547-9.4819336   c-0.0066528-0.0340576-0.0269165-0.0604248-0.0377197-0.0924072c-0.010498-0.0315552-0.0098267-0.0643921-0.0247803-0.0950928   c-0.0075684-0.0155029-0.0216675-0.0246582-0.0301514-0.0393677c-0.0272217-0.0478516-0.0612183-0.0872192-0.0975342-0.1273193   c-0.0292358-0.0321655-0.0559082-0.0645752-0.0897827-0.0908203c-0.0409546-0.0319824-0.0859985-0.053894-0.1328735-0.0767212   c-0.0407715-0.0198975-0.0791626-0.0401001-0.1227417-0.0523682c-0.0438843-0.0122681-0.0886841-0.0148926-0.1351318-0.0188599   c-0.053833-0.0049438-0.1057129-0.0080566-0.1601563-0.0009766c-0.0164185,0.0021362-0.0314941-0.003479-0.0480347-0.0003052   c-0.0328979,0.0063477-0.0581665,0.0263672-0.0891113,0.0366821c-0.0322876,0.0108032-0.06604,0.0101929-0.0974121,0.0258179   l-2.7524414,1.345459c0.4395142-0.8766479,0.7983398-1.9657593,0.7983398-3.2058105   c0-3.9213867-3.1787109-7.1137695-7.0927734-7.1342773c-0.0097656,0-0.0175781,0-0.0253906,0s-0.015625,0-0.0253906,0   c-3.9150391,0.0205078-7.09375,3.2128906-7.09375,7.1342773c0,1.2284546,0.3527222,2.30896,0.7872314,3.1819458   l-3.4337158,1.6784058c-0.0142822,0.007019-0.0227051,0.0200806-0.0363159,0.027832   c-0.0516968,0.0290527-0.0952148,0.0656128-0.1384888,0.1061401c-0.0292358,0.0274048-0.0584106,0.0525513-0.0826416,0.0838013   c-0.0309448,0.039978-0.0528564,0.0843506-0.0754395,0.1307983c-0.0216675,0.0441895-0.041748,0.0866699-0.0544434,0.1341553   c-0.0046387,0.0175171-0.0164185,0.0309448-0.0198975,0.0490112l-1.8310547,9.4819336   c-0.0045776,0.0238647,0.0028687,0.0462036,0.0006104,0.0699463c-0.005127,0.0510254-0.0041504,0.1002808,0.0014038,0.1520996   c0.0055542,0.0505371,0.0148315,0.0975952,0.0302124,0.1452026c0.0073853,0.0233154,0.0048218,0.0473022,0.0146484,0.0702515   c0.0126343,0.0294189,0.0331421,0.052002,0.0488892,0.0789185c0.013916,0.0238037,0.0262451,0.046875,0.0426636,0.0689697   c0.046814,0.0631714,0.100769,0.118042,0.1628418,0.1625366c0.0079956,0.0057983,0.0136108,0.0137329,0.0218506,0.019165   c0.0743408,0.0490723,0.1575317,0.0802612,0.2441406,0.1004028c0.0096436,0.0022583,0.0167236,0.0090332,0.0264893,0.0109253   c0.0478516,0.0090942,0.0947876,0.0133057,0.1407471,0.0134277c0.0006104,0,0.0012207,0.0002441,0.0018311,0.0002441   c0.0001221,0,0.0001831-0.000061,0.0003052-0.000061c0.0002441,0,0.0004272,0.000061,0.0006714,0.000061   c0.0962524,0,0.1879883-0.0219116,0.274353-0.0563354c0.0067749-0.0026245,0.013855-0.0013428,0.0205688-0.0042114   l6.730957-2.8847046L17,24.4072266c0.0056763,0.0020142,0.0113525,0.0010986,0.0170288,0.0029297   C17.09198,24.4347534,17.1699219,24.4501953,17.25,24.4501953c0.092041,0,0.1802979-0.0219116,0.2647095-0.0541382   c0.0102539-0.0038452,0.0209961-0.0020752,0.031189-0.0064087l7-3c0.022522-0.0096436,0.0369263-0.0285645,0.0579834-0.0401001   c0.0446777-0.0244141,0.0838623-0.052002,0.1220703-0.0843506c0.0371094-0.0313721,0.0704956-0.0629272,0.1004028-0.1002197   C24.8562012,21.1279297,24.8797607,21.0894165,24.9021606,21.0473633z M4.24646,14.7277222l3.2199707-1.5739136   l1.3627319,1.8533936l-0.5172119,5.0644531l-5.5574341,2.3817749L4.24646,14.7277222z M9.3131714,20.1036987l0.3980103-3.8969116   l2.689209,3.6574707c0.1416016,0.1923828,0.3916016,0.3056641,0.6298828,0.3056641s0.4628906-0.1137695,0.6044922-0.3056641   l2.3893433-3.2503662l0.6206055,6.0773926L9.3131714,20.1036987z M17.6513062,22.7119141l-0.7452393-7.2978516l0.7644653-1.039978   l4.1978149-2.052002l1.5307007,7.9265747L17.6513062,22.7119141z M13.0175781,3.0498047   c3.0996094,0.0068359,5.6181641,2.5317383,5.6181641,5.6342773c0,1.4643555-0.6523438,2.699707-1.2050781,3.484375   c-0.0019531,0.0024414-0.0039063,0.0043945-0.0058594,0.0068359l-4.4072266,5.9956055l-4.3916016-5.9731445   C8.6230469,12.1943359,8.6210938,12.190918,8.6181641,12.1875c-0.5566406-0.7841797-1.2197266-2.0283203-1.2197266-3.503418   C7.3984375,5.581543,9.9179688,3.0566406,13.0175781,3.0498047z" fill="#ffffff"/><path d="M13.0302734,11.847168c1.7412109,0,3.1582031-1.4189453,3.1582031-3.1630859   s-1.4169922-3.1630859-3.1582031-3.1630859c-1.7421875,0-3.1591797,1.4189453-3.1591797,3.1630859   S11.2880859,11.847168,13.0302734,11.847168z M13.0302734,6.5209961c1.1904297,0,2.1582031,0.9702148,2.1582031,2.1630859   s-0.9677734,2.1630859-2.1582031,2.1630859s-2.1591797-0.9702148-2.1591797-2.1630859S11.8398438,6.5209961,13.0302734,6.5209961z" fill="#ffffff"/></g></svg>',o='<div class="'+a.map.canvasHint.className+'" style="position: absolute; width: 200px; height: 200px; top: 50%; left: 50%; margin-top: -100px; margin-left: -100px; text-align: center">'+n+'<div class="'+a.map.canvasHint.className+'-body">'+a.map.canvasHint.msg+"</div></div>";i(t).append(o),r.initEventListener()}})},r.setState=function(e,t){return"undefined"!=typeof Storage?(localStorage.setItem(e,t),!0):(a.map.debug&&console.log("[XIMA.api.dsgvo] browser doesn't support local storage"),!1)},r.getState=function(e){return"undefined"!=typeof Storage?localStorage.getItem(e):(a.map.debug&&console.log("[XIMA.api.dsgvo] browser doesn't support local storage"),!1)},r}(window,document,jQuery),XIMA.api.googlemaps=function(e,t,i,n){var r={},o=null,a=null,s=null,l=[],p=[],c=[],u={},h={},g={backgroundColor:"String",center:"google.maps.LatLng",disableDefaultUI:"Boolean",disableDoubleClickZoom:"Boolean",draggable:"Boolean",draggableCursor:"String",draggingCursor:"String",heading:"Number",keyboardShortcuts:"Boolean",mapMaker:"Boolean",mapTypeControl:"Boolean",mapTypeControlOptions:"google.maps.MapTypeControlOptions",mapTypeId:"google.maps.MapTypeId",maxZoom:"Number",minZoom:"Number",noClear:"Boolean",overviewMapControl:"Boolean",overviewMapControlOptions:"google.maps.OverviewMapControlOptions",panControl:"Boolean",panControlOptions:"google.maps.PanControlOptions",rotateControl:"Boolean",rotateControlOptions:"google.maps.RotateControlOptions",scaleControl:"Boolean",scaleControlOptions:"google.maps.ScaleControlOptions",scrollwheel:"Boolean",streetView:"google.maps.StreetViewPanorama",streetViewControl:"Boolean",streetViewControlOptions:"google.maps.StreetViewControlOptions",styles:"google.maps.MapTypeStyle",tilt:"Number",zoom:"Number",zoomControl:"Boolean",zoomControlOptions:"google.maps.ZoomControlOptions"},d=null,m={keepSpiderfied:!0},f={msg:{IsNotJson:"Die angegebene Variable ist keine JSON!",MissingMapDataProperty:"Dem MapData-Object fehlen die benötigten Eigenschaften!",MissingMapCanvas:"Es wird ein Map-Canvas benötigt!",MissingMap:"Fehlende GoogleMaps Instanz!"}};return r.initGoogleMaps=function(e,t){if(r.getMapOptions(),i(a).data("map-initialized")&&!0===i(a).data("map-initialized"))return this;if(!a)return console.log(f.msg.MissingMapCanvas),this;i(a).data("map-initialized",!0),o=new google.maps.Map(a,r.getMapOptions()),this.applyMapData(e,t);for(var n in u)u.hasOwnProperty(n)&&u[n].setMap(o);return this},r.applyMapData=function(e,t){if(!o)return console.log(f.msg.MissingMap),this;if(jQuery.isEmptyObject(h)||!h.points)return console.log(f.msg.MissingMapDataProperty),this;var e="boolean"!=typeof e||e,t="boolean"!=typeof t||t;if(e)var i=new google.maps.LatLngBounds;var n,a,s,l,c=!jQuery.isEmptyObject(h)&&h.points?Object.keys(h.points).length:0;t&&this.createOverlappingMarkerSpiderfier();for(var u,g,d=0;d<c;d++)u=parseFloat(h.points[d].lat),g=parseFloat(h.points[d].lng),isNaN(u)||isNaN(g)||(a=new google.maps.LatLng(u,g),n=h.points[d].title?h.points[d].title:"",s=h.points[d].icon?h.points[d].icon:null,this.addMarker(a,n,s),l=p.length-1,e&&i.extend(p[l].position),p[l].setMap(o));if(e&&p.length>0){o.fitBounds(i);var m=google.maps.event.addListener(o,"zoom_changed",function(){o.getZoom()>r.getMapOptions.zoom&&o.setZoom(r.getMapOptions.zoom),google.maps.event.removeListener(m)})}},r.closeInfoWindows=function(){l.length>0&&(l[0].set("marker",null),l[0].close(),l.length=0)},r.setMapOptions=function(e){return e&&r.convertDataType(e,g)&&(d=e),this},r.addMapOptions=function(e){return e&&r.convertDataType(e,g)&&jQuery.extend(r.getMapOptions,e),this},r.convertDataType=function(t,i){if(!i||"object"!=typeof t)return!1;var n=!0;for(var r in t)if(i[r]){var o,a=i[r].split(".");o=e[a[0]];for(var s=1;s<a.length;s++)o=o[a[s]];if(!(t[r]instanceof o||typeof t[r]===o)&&typeof t[r]!==o)try{t[r]=o(t[r])}catch(e){try{t[r]=new o}catch(e){console.log("Cannot convert "+t[r]+" to "+o),n=!1}}}return n},r.getMapOptions=function(){return typeof d!=google.maps&&(d={center:new google.maps.LatLng(51.06966,13.778158),zoom:8}),d},r.setMapData=function(e){if("array"===jQuery.type(e)||"object"===jQuery.type(e))h=e;else if("string"===jQuery.type(e))for(var t=!0;t;){try{h=jQuery.parseJSON(json)}catch(t){if(0!==jQuery(e).length){json=jQuery(e).val();continue}console.log(f.msg.IsNotJson)}t=!1}return jQuery.isEmptyObject(h)||!h.points?console.log(f.msg.MissingMapDataProperty):h.mapOptions&&this.addMapOptions(h.mapOptions),this},r.setMapCanvas=function(e){return a=jQuery(e).get(0),this},r.addLayers=function(e){if("object"==typeof e)for(var t in e)u[t]=new google.maps.KmlLayer({url:e[t],preserveViewport:!0});return this},r.removeLayer=function(e){return e&&u.key&&delete u.key,this},r.addMarker=function(e,t,i,n){if(!o)return console.log(f.msg.MissingMap),this;var r=this;if(p.push(new google.maps.Marker({position:e,title:t,icon:i,map:o})),j=p.length-1,s&&s.addMarker(p[j]),!1!==n){var n=n||h.points[j].windowContent;google.maps.event.addListener(p[j],"click",function(e){return function(){r.closeInfoWindows();var t=new google.maps.InfoWindow({content:n});t.open(o,p[e]),l[0]=t}}(j))}return this},r.setAllMarkersMap=function(e){for(var t=p.length-1;t>=0;t--)p[t].setMap(e);return this},r.clearMarkers=function(){return this.setAllMarkersMap(null),this},r.deleteMarkers=function(){return this.clearMarkers(),p=[],this},r.showMarkers=function(){return o&&this.setAllMarkersMap(o),this},r.createOverlappingMarkerSpiderfier=function(){return e.initOverlappingMarkerSpiderfier(),o&&(s=new OverlappingMarkerSpiderfier(o,m)),this},r.getOMSOptions=function(){return m},r.drawPolyline=function(e,t,i){var n=[];t&&(h.routes[e]=jQuery.parseJSON(t));for(var r=jQuery.isEmptyObject(h)||jQuery.isEmptyObject(h.routes)||!h.routes[e]?0:Object.keys(h.routes[e]).length,a=0;a<r;a++)h.routes[e][a].lat&&h.routes[e][a].lng&&n.push(new google.maps.LatLng(parseFloat(h.routes[e][a].lat),parseFloat(h.routes[e][a].lng)));var s={path:n,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2};return i&&jQuery.extend(s,i),c[e]=new google.maps.Polyline(s),o&&c[e].setMap(o),this},r}(window,document,jQuery),XIMA.api.openlayers=function(e,t,i,n){function r(e,t){a={wrapper:e,map:t}}function o(e){return i(a.wrapper).each(function(){i(a.map,i(this)).each(function(){s.push(new l({target:i(this).get(0),baseLayerUrl:e.baseLayerUrl,view:e.view,attribution:e.attribution}))})}),s}var a={},s=[],l=function(e){var t=this;this.map=new ol.Map({target:e.target}),this.addLayer=function(e){t.map.addLayer(e)},this.initialize=function(){if(e.hasOwnProperty("baseLayerUrl")){var i=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:e.attribution||""})],tilePixelRatio:2,url:e.baseLayerUrl}),name:"baseLayer",title:"Base Layer"});t.map.addLayer(i)}if(e.hasOwnProperty("view")){jQuery.extend(e.view,{center:ol.proj.transform([e.view.lon,e.view.lat],"EPSG:4326","EPSG:3857"),zoom:e.view.zoom||7});var n=new ol.View(e.view);t.map.setView(n)}},this.initialize()};return{createMaps:function(e,t,i,n,a){return r(e,t),o({baseLayerUrl:i,view:n,attribution:a})}}}(window,document,jQuery),XIMA.api.responsiveImages=function(e,t,i,n){function r(e,t){a={wrapper:e||"body",image:t||"img"}}function o(){i(a.wrapper).each(function(){var t=i(this),n={width:t.width()};i(a.image,t).each(function(){for(var t,r=i(this),o=/([^\s,]+)\s+(\d+)w/g,a=r.data("srcset"),s=[];null!==(t=o.exec(a));)s.push({src:t[1],width:parseInt(t[2])});s.sort(function(e,t){return e.width-t.width});for(var l=n.width*e.devicePixelRatio,p=0;p<s.length;p++){if(s[p].width>=l){r.attr("width",n.width),r.attr("src",s[p].src);break}p===s.length-1&&(r.attr("width",n.width),r.attr("src",s[p].src))}})})}var a={};return e.onresize=o,{run:function(e,t){r(e,t),o()},refresh:function(){o()}}}(window,document,jQuery);