var XIMA={api:{}};window.initOverlappingMarkerSpiderfier=function(){var d=!0,f=null,m=!1;(function(){var t,l={}.hasOwnProperty,s=[].slice;((t=this.google)!=f?t.maps:void 0)!=f&&(this.OverlappingMarkerSpiderfier=function(){function t(t,e){var i,n,r,o,s=this;for(i in this.map=t,e==f&&(e={}),e)l.call(e,i)&&(n=e[i],this[i]=n);for(this.e=new this.constructor.g(this.map),this.n(),this.b={},n=0,r=(o=["click","zoom_changed","maptypeid_changed"]).length;n<r;n++)i=o[n],u.addListener(this.map,i,function(){return s.unspiderfy()})}var u,g,e,i,n,r,a,o;for(i=0,n=(o=[t,r=t.prototype]).length;i<n;i++)(e=o[i]).VERSION="0.3.3";return g=google.maps,u=g.event,n=g.MapTypeId,a=2*Math.PI,r.keepSpiderfied=m,r.markersWontHide=m,r.markersWontMove=m,r.nearbyDistance=20,r.circleSpiralSwitchover=9,r.circleFootSeparation=23,r.circleStartAngle=a/12,r.spiralFootSeparation=26,r.spiralLengthStart=11,r.spiralLengthFactor=4,r.spiderfiedZIndex=1e3,r.usualLegZIndex=10,r.highlightedLegZIndex=20,r.legWeight=1.5,r.legColors={usual:{},highlighted:{}},i=r.legColors.usual,e=r.legColors.highlighted,i[n.HYBRID]=i[n.SATELLITE]="#fff",e[n.HYBRID]=e[n.SATELLITE]="#f00",i[n.TERRAIN]=i[n.ROADMAP]="#444",e[n.TERRAIN]=e[n.ROADMAP]="#f00",r.n=function(){this.a=[],this.j=[]},r.addMarker=function(e){var t,i=this;return e._oms!=f||(e._oms=d,t=[u.addListener(e,"click",function(t){return i.F(e,t)})],this.markersWontHide||t.push(u.addListener(e,"visible_changed",function(){return i.o(e,m)})),this.markersWontMove||t.push(u.addListener(e,"position_changed",function(){return i.o(e,d)})),this.j.push(t),this.a.push(e)),this},r.o=function(t,e){if(t._omsData!=f&&(e||!t.getVisible())&&this.s==f&&this.t==f)return this.unspiderfy(e?t:f)},r.getMarkers=function(){return this.a.slice(0)},r.removeMarker=function(t){var e,i,n,r,o;if(t._omsData!=f&&this.unspiderfy(),(e=this.m(this.a,t))<0)return this;for(r=0,o=(n=this.j.splice(e,1)[0]).length;r<o;r++)i=n[r],u.removeListener(i);return delete t._oms,this.a.splice(e,1),this},r.clearMarkers=function(){var t,e,i,n,r,o,s,a;for(this.unspiderfy(),t=n=0,o=(a=this.a).length;n<o;t=++n){for(i=a[t],r=0,s=(e=this.j[t]).length;r<s;r++)t=e[r],u.removeListener(t);delete i._oms}return this.n(),this},r.addListener=function(t,e){var i,n;return((n=(i=this.b)[t])!=f?n:i[t]=[]).push(e),this},r.removeListener=function(t,e){var i;return(i=this.m(this.b[t],e))<0||this.b[t].splice(i,1),this},r.clearListeners=function(t){return this.b[t]=[],this},r.trigger=function(){var t,e,i,n,r,o;for(e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],o=[],n=0,r=(e=(i=this.b[e])!=f?i:[]).length;n<r;n++)i=e[n],o.push(i.apply(f,t));return o},r.u=function(t,e){var i,n,r,o,s;for(r=this.circleFootSeparation*(2+t)/a,n=a/t,s=[],i=o=0;0<=t?o<t:t<o;i=0<=t?++o:--o)i=this.circleStartAngle+i*n,s.push(new g.Point(e.x+r*Math.cos(i),e.y+r*Math.sin(i)));return s},r.v=function(t,e){var i,n,r,o,s;for(r=this.spiralLengthStart,s=[],n=o=i=0;0<=t?o<t:t<o;n=0<=t?++o:--o)i+=this.spiralFootSeparation/r+5e-4*n,n=new g.Point(e.x+r*Math.cos(i),e.y+r*Math.sin(i)),r+=a*this.spiralLengthFactor/i,s.push(n);return s},r.F=function(t,e){var i,n,r,o,s,a,l,p,c;if((!(o=t._omsData!=f)||!this.keepSpiderfied)&&this.unspiderfy(),o||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",t,e);for(o=[],s=[],a=(i=this.nearbyDistance)*i,r=this.c(t.position),l=0,p=(c=this.a).length;l<p;l++)(i=c[l]).map!=f&&i.getVisible()&&(n=this.c(i.position),this.f(n,r)<a?o.push({A:i,p:n}):s.push(i));return 1===o.length?this.trigger("click",t,e):this.G(o,s)},r.markersNearMarker=function(t,e){var i,n,r,o,s,a,l,p,c,h;if(e==f&&(e=m),this.e.getProjection()==f)throw"Must wait for 'idle' event on map before calling markersNearMarker";for(s=(i=this.nearbyDistance)*i,r=this.c(t.position),o=[],a=0,l=(p=this.a).length;a<l&&!((i=p[a])!==t&&i.map!=f&&i.getVisible()&&(n=this.c((c=(h=i._omsData)!=f?h.l:void 0)!=f?c:i.position),this.f(n,r)<s&&(o.push(i),e)));a++);return o},r.markersNearAnyOtherMarker=function(){var t,e,i,n,r,o,s,a,l,p,c,h;if(this.e.getProjection()==f)throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(t=(o=this.nearbyDistance)*o,o=[],c=0,i=(n=this.a).length;c<i;c++)e=n[c],o.push({q:this.c((s=(l=e._omsData)!=f?l.l:void 0)!=f?s:e.position),d:m});for(e=s=0,l=(c=this.a).length;s<l;e=++s)if((i=c[e]).map!=f&&i.getVisible()&&!(n=o[e]).d)for(i=a=0,p=(h=this.a).length;a<p;i=++a)if(r=h[i],i!==e&&r.map!=f&&r.getVisible()&&(r=o[i],(!(i<e)||r.d)&&this.f(n.q,r.q)<t)){n.d=r.d=d;break}for(i=[],t=s=0,l=(c=this.a).length;s<l;t=++s)e=c[t],o[t].d&&i.push(e);return i},r.z=function(t){var e=this;return{h:function(){return t._omsData.i.setOptions({strokeColor:e.legColors.highlighted[e.map.mapTypeId],zIndex:e.highlightedLegZIndex})},k:function(){return t._omsData.i.setOptions({strokeColor:e.legColors.usual[e.map.mapTypeId],zIndex:e.usualLegZIndex})}}},r.G=function(r,t){var e,o,s,a,l,p,c,n,h,i;return this.s=d,i=r.length,e=this.C(function(){var t,e,i;for(i=[],t=0,e=r.length;t<e;t++)n=r[t],i.push(n.p);return i}()),a=i>=this.circleSpiralSwitchover?this.v(i,e).reverse():this.u(i,e),e=function(){var t,e,i,n=this;for(i=[],t=0,e=a.length;t<e;t++)s=a[t],o=this.D(s),h=this.B(r,function(t){return n.f(t.p,s)}),c=h.A,p=new g.Polyline({map:this.map,path:[c.position,o],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),c._omsData={l:c.position,i:p},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(l=this.z(c),c._omsData.w={h:u.addListener(c,"mouseover",l.h),k:u.addListener(c,"mouseout",l.k)}),c.setPosition(o),c.setZIndex(Math.round(this.spiderfiedZIndex+s.y)),i.push(c);return i}.call(this),delete this.s,this.r=d,this.trigger("spiderfy",e,t)},r.unspiderfy=function(t){var e,i,n,r,o,s,a;if(t==f&&(t=f),this.r==f)return this;for(this.t=d,r=[],n=[],o=0,s=(a=this.a).length;o<s;o++)(i=a[o])._omsData!=f?(i._omsData.i.setMap(f),i!==t&&i.setPosition(i._omsData.l),i.setZIndex(f),(e=i._omsData.w)!=f&&(u.removeListener(e.h),u.removeListener(e.k)),delete i._omsData,r.push(i)):n.push(i);return delete this.t,delete this.r,this.trigger("unspiderfy",r,n),this},r.f=function(t,e){var i,n;return(i=t.x-e.x)*i+(n=t.y-e.y)*n},r.C=function(t){var e,i,n,r,o;for(r=i=n=0,o=t.length;r<o;r++)i+=(e=t[r]).x,n+=e.y;return t=t.length,new g.Point(i/t,n/t)},r.c=function(t){return this.e.getProjection().fromLatLngToDivPixel(t)},r.D=function(t){return this.e.getProjection().fromDivPixelToLatLng(t)},r.B=function(t,e){var i,n,r,o,s,a;for(r=s=0,a=t.length;s<a;r=++s)o=e(o=t[r]),(void 0===i||i===f||o<n)&&(n=o,i=r);return t.splice(i,1)[0]},r.m=function(t,e){var i,n,r;if(t.indexOf!=f)return t.indexOf(e);for(i=n=0,r=t.length;n<r;i=++n)if(t[i]===e)return i;return-1},(t.g=function(t){return this.setMap(t)}).prototype=new g.OverlayView,t.g.prototype.draw=function(){},t}())}).call(this)},XIMA.api.dsgvo=function(t,e,r,i){var o={},n="XIMA.api.dsgvo",s=!1,a={debug:!1,scriptUrl:null,scriptUrlSelector:".map-script-url",mapStorageIdentifier:"ximaMapState",useGlobal:!1,useCanvasHint:!0,switchElement:null,canvasElements:[],callback:function(){},canvasHint:{msg:"Karten sind standardmäßig deaktiviert. Klicken Sie hier, um den Datenschutzbestimmungen zuzustimmen und die Karte anzeigen zu lassen.",style:{backgroundColor:"rgba(0,0,0,0.5)",textColor:"#dddddd",textSize:"12px",iconUrl:null},className:null}},l="."+a.canvasHint.className;return o.initialize=function(t){return t&&jQuery.extend(a,t.map),"true"===o.getState(a.mapStorageIdentifier)?(s=!0,o.loadScript()):o.hideCanvasElements(),o.initEventListener(),a.switchElement&&r(a.switchElement).length&&r(a.switchElement).prop("checked","true"===o.getState(a.mapStorageIdentifier)),this},o.loadScript=function(){var t="";a.scriptUrl?t=a.scriptUrl:r(a.scriptUrlSelector).length?t=r(a.scriptUrlSelector).attr("data-url"):a.debug&&console.log("["+n+"] no script url provided"),""!==t&&jQuery.getScript(t).done(function(){a.debug&&console.log("["+n+"] loading script: "+t),a.debug&&console.log("["+n+"] map script loaded"),a.callback()}).fail(function(t,e,i){a.debug&&console.log("["+n+"] getScript failed")})},o.initEventListener=function(){a.switchElement&&a.useGlobal&&(r(a.switchElement).unbind(),r(a.switchElement).change(function(t){a.debug&&console.log("["+n+"] switch maps representation state to: "+r(this).is(":checked")),o.setState(a.mapStorageIdentifier,r(this).is(":checked")),r(this).is(":checked")&&o.loadScript()})),r(l).length&&(r(l).unbind(),r(l).on("click",function(t){s||(a.debug&&console.log("["+n+"] activate maps representation by clicking the hint"),r(l).fadeOut(function(){r(this).remove()}),o.loadScript(),s=!0,a.useGlobal&&(o.setState(a.mapStorageIdentifier,!0),r(a.switchElement).prop("checked","true"===o.getState(a.mapStorageIdentifier))))}))},o.hideCanvasElements=function(){s||r.each(a.canvasElements,function(t,e){if(r(e).length){r(e).css("background-color",a.canvasHint.style.backgroundColor),r(e).css("color",a.canvasHint.style.textColor),r(e).css("font-size",a.canvasHint.style.textSize),r(e).hover(function(){r(this).css("cursor","pointer")});var i=a.canvasHint.style.iconUrl?'<img src="'+a.canvasHint.style.iconUrl+'" style="width: 50px; margin-bottom: 20px;" alt="Forbidden map" />':'<?xml version="1.0" ?><!DOCTYPE svg  PUBLIC \'-//W3C//DTD SVG 1.1//EN\'  \'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\'><svg enable-background="new 0 0 26 26" id="map" version="1.1" viewBox="0 0 26 26" width="100px" height="100px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M24.9021606,21.0473633c0.0229492-0.0432129,0.0421753-0.0855103,0.0563354-0.1323242   c0.0135498-0.0444336,0.0206909-0.088562,0.0258179-0.1355591c0.0056152-0.0511475,0.0065308-0.1004639,0.0014038-0.1525879   c-0.0022583-0.0233154,0.005127-0.0452881,0.0006104-0.0687866l-1.8310547-9.4819336   c-0.0066528-0.0340576-0.0269165-0.0604248-0.0377197-0.0924072c-0.010498-0.0315552-0.0098267-0.0643921-0.0247803-0.0950928   c-0.0075684-0.0155029-0.0216675-0.0246582-0.0301514-0.0393677c-0.0272217-0.0478516-0.0612183-0.0872192-0.0975342-0.1273193   c-0.0292358-0.0321655-0.0559082-0.0645752-0.0897827-0.0908203c-0.0409546-0.0319824-0.0859985-0.053894-0.1328735-0.0767212   c-0.0407715-0.0198975-0.0791626-0.0401001-0.1227417-0.0523682c-0.0438843-0.0122681-0.0886841-0.0148926-0.1351318-0.0188599   c-0.053833-0.0049438-0.1057129-0.0080566-0.1601563-0.0009766c-0.0164185,0.0021362-0.0314941-0.003479-0.0480347-0.0003052   c-0.0328979,0.0063477-0.0581665,0.0263672-0.0891113,0.0366821c-0.0322876,0.0108032-0.06604,0.0101929-0.0974121,0.0258179   l-2.7524414,1.345459c0.4395142-0.8766479,0.7983398-1.9657593,0.7983398-3.2058105   c0-3.9213867-3.1787109-7.1137695-7.0927734-7.1342773c-0.0097656,0-0.0175781,0-0.0253906,0s-0.015625,0-0.0253906,0   c-3.9150391,0.0205078-7.09375,3.2128906-7.09375,7.1342773c0,1.2284546,0.3527222,2.30896,0.7872314,3.1819458   l-3.4337158,1.6784058c-0.0142822,0.007019-0.0227051,0.0200806-0.0363159,0.027832   c-0.0516968,0.0290527-0.0952148,0.0656128-0.1384888,0.1061401c-0.0292358,0.0274048-0.0584106,0.0525513-0.0826416,0.0838013   c-0.0309448,0.039978-0.0528564,0.0843506-0.0754395,0.1307983c-0.0216675,0.0441895-0.041748,0.0866699-0.0544434,0.1341553   c-0.0046387,0.0175171-0.0164185,0.0309448-0.0198975,0.0490112l-1.8310547,9.4819336   c-0.0045776,0.0238647,0.0028687,0.0462036,0.0006104,0.0699463c-0.005127,0.0510254-0.0041504,0.1002808,0.0014038,0.1520996   c0.0055542,0.0505371,0.0148315,0.0975952,0.0302124,0.1452026c0.0073853,0.0233154,0.0048218,0.0473022,0.0146484,0.0702515   c0.0126343,0.0294189,0.0331421,0.052002,0.0488892,0.0789185c0.013916,0.0238037,0.0262451,0.046875,0.0426636,0.0689697   c0.046814,0.0631714,0.100769,0.118042,0.1628418,0.1625366c0.0079956,0.0057983,0.0136108,0.0137329,0.0218506,0.019165   c0.0743408,0.0490723,0.1575317,0.0802612,0.2441406,0.1004028c0.0096436,0.0022583,0.0167236,0.0090332,0.0264893,0.0109253   c0.0478516,0.0090942,0.0947876,0.0133057,0.1407471,0.0134277c0.0006104,0,0.0012207,0.0002441,0.0018311,0.0002441   c0.0001221,0,0.0001831-0.000061,0.0003052-0.000061c0.0002441,0,0.0004272,0.000061,0.0006714,0.000061   c0.0962524,0,0.1879883-0.0219116,0.274353-0.0563354c0.0067749-0.0026245,0.013855-0.0013428,0.0205688-0.0042114   l6.730957-2.8847046L17,24.4072266c0.0056763,0.0020142,0.0113525,0.0010986,0.0170288,0.0029297   C17.09198,24.4347534,17.1699219,24.4501953,17.25,24.4501953c0.092041,0,0.1802979-0.0219116,0.2647095-0.0541382   c0.0102539-0.0038452,0.0209961-0.0020752,0.031189-0.0064087l7-3c0.022522-0.0096436,0.0369263-0.0285645,0.0579834-0.0401001   c0.0446777-0.0244141,0.0838623-0.052002,0.1220703-0.0843506c0.0371094-0.0313721,0.0704956-0.0629272,0.1004028-0.1002197   C24.8562012,21.1279297,24.8797607,21.0894165,24.9021606,21.0473633z M4.24646,14.7277222l3.2199707-1.5739136   l1.3627319,1.8533936l-0.5172119,5.0644531l-5.5574341,2.3817749L4.24646,14.7277222z M9.3131714,20.1036987l0.3980103-3.8969116   l2.689209,3.6574707c0.1416016,0.1923828,0.3916016,0.3056641,0.6298828,0.3056641s0.4628906-0.1137695,0.6044922-0.3056641   l2.3893433-3.2503662l0.6206055,6.0773926L9.3131714,20.1036987z M17.6513062,22.7119141l-0.7452393-7.2978516l0.7644653-1.039978   l4.1978149-2.052002l1.5307007,7.9265747L17.6513062,22.7119141z M13.0175781,3.0498047   c3.0996094,0.0068359,5.6181641,2.5317383,5.6181641,5.6342773c0,1.4643555-0.6523438,2.699707-1.2050781,3.484375   c-0.0019531,0.0024414-0.0039063,0.0043945-0.0058594,0.0068359l-4.4072266,5.9956055l-4.3916016-5.9731445   C8.6230469,12.1943359,8.6210938,12.190918,8.6181641,12.1875c-0.5566406-0.7841797-1.2197266-2.0283203-1.2197266-3.503418   C7.3984375,5.581543,9.9179688,3.0566406,13.0175781,3.0498047z" fill="#ffffff"/><path d="M13.0302734,11.847168c1.7412109,0,3.1582031-1.4189453,3.1582031-3.1630859   s-1.4169922-3.1630859-3.1582031-3.1630859c-1.7421875,0-3.1591797,1.4189453-3.1591797,3.1630859   S11.2880859,11.847168,13.0302734,11.847168z M13.0302734,6.5209961c1.1904297,0,2.1582031,0.9702148,2.1582031,2.1630859   s-0.9677734,2.1630859-2.1582031,2.1630859s-2.1591797-0.9702148-2.1591797-2.1630859S11.8398438,6.5209961,13.0302734,6.5209961z" fill="#ffffff"/></g></svg>',n='<div class="'+a.canvasHint.className+'" style="position: absolute; width: 200px; height: 200px; top: 50%; left: 50%; margin-top: -100px; margin-left: -100px; text-align: center">'+i+'<div class="'+a.canvasHint.className+'-body">'+a.canvasHint.msg+"</div></div>";r(e).append(n),o.initEventListener()}})},o.setState=function(t,e){return"undefined"!=typeof Storage?(localStorage.setItem(t,e),!0):(a.debug&&console.log("["+n+"] browser doesn't support local storage"),!1)},o.getState=function(t){return"undefined"!=typeof Storage?localStorage.getItem(t):(a.debug&&console.log("["+n+"] browser doesn't support local storage"),!1)},o}(window,document,jQuery),XIMA.api.googlemaps=function(p,t,o,e){var i={Map:function(){var u=this,g=null,n=null,s=null,a=[],d=[],l=[],r={},f={},e={backgroundColor:"String",center:"google.maps.LatLng",disableDefaultUI:"Boolean",disableDoubleClickZoom:"Boolean",draggable:"Boolean",draggableCursor:"String",draggingCursor:"String",heading:"Number",keyboardShortcuts:"Boolean",mapMaker:"Boolean",mapTypeControl:"Boolean",mapTypeControlOptions:"google.maps.MapTypeControlOptions",mapTypeId:"google.maps.MapTypeId",maxZoom:"Number",minZoom:"Number",noClear:"Boolean",overviewMapControl:"Boolean",overviewMapControlOptions:"google.maps.OverviewMapControlOptions",panControl:"Boolean",panControlOptions:"google.maps.PanControlOptions",rotateControl:"Boolean",rotateControlOptions:"google.maps.RotateControlOptions",scaleControl:"Boolean",scaleControlOptions:"google.maps.ScaleControlOptions",scrollwheel:"Boolean",streetView:"google.maps.StreetViewPanorama",streetViewControl:"Boolean",streetViewControlOptions:"google.maps.StreetViewControlOptions",styles:"google.maps.MapTypeStyle",tilt:"Number",zoom:"Number",zoomControl:"Boolean",zoomControlOptions:"google.maps.ZoomControlOptions"},i=null,t={keepSpiderfied:!0},m={IsNotJson:"Die angegebene Variable ist keine JSON!",MissingMapDataProperty:"Dem MapData-Object fehlen die benötigten Eigenschaften!",MissingMapCanvas:"Es wird ein Map-Canvas benötigt!",MissingMap:"Fehlende GoogleMaps Instanz!"};this.initGoogleMaps=function(t,e){if(this.getMapOptions(),o(n).data("map-initialized")&&!0===o(n).data("map-initialized"))return this;if(!n)return console.log(m.MissingMapCanvas),this;for(var i in o(n).data("map-initialized",!0),g=new google.maps.Map(n,this.getMapOptions()),this.applyMapData(t,e),r)r.hasOwnProperty(i)&&r[i].setMap(g);return this},this.applyMapData=function(t,e){if(!g)return console.log(m.MissingMap),this;if(jQuery.isEmptyObject(f)||!f.points)return console.log(m.MissingMapDataProperty),this;e="boolean"!=typeof e||e;if(t="boolean"!=typeof t||t)var i=new google.maps.LatLngBounds;var n,r,o,s,a,l,p=!jQuery.isEmptyObject(f)&&f.points?Object.keys(f.points).length:0;e&&this.createOverlappingMarkerSpiderfier();for(var c=0;c<p;c++)a=parseFloat(f.points[c].lat),l=parseFloat(f.points[c].lng),isNaN(a)||isNaN(l)||(r=new google.maps.LatLng(a,l),n=f.points[c].title?f.points[c].title:"",o=f.points[c].icon?f.points[c].icon:null,this.addMarker(r,n,o),s=d.length-1,t&&i.extend(d[s].position),d[s].setMap(g));if(t&&0<d.length){g.fitBounds(i);var h=google.maps.event.addListener(g,"zoom_changed",function(){g.getZoom()>u.getMapOptions.zoom&&g.setZoom(u.getMapOptions.zoom),google.maps.event.removeListener(h)})}},this.closeInfoWindows=function(){0<a.length&&(a[0].set("marker",null),a[0].close(),a.length=0)},this.setMapOptions=function(t){return t&&this.convertDataType(t,e)&&(i=t),this},this.addMapOptions=function(t){return t&&this.convertDataType(t,e)&&jQuery.extend(this.getMapOptions,t),this},this.convertDataType=function(e,t){if(!t||"object"!=typeof e)return!1;var i=!0;for(var n in e)if(t[n]){var r,o=t[n].split(".");r=p[o[0]];for(var s=1;s<o.length;s++)r=r[o[s]];if(!(e[n]instanceof r||typeof e[n]===r)&&typeof e[n]!==r)try{e[n]=r(e[n])}catch(t){try{e[n]=new r}catch(t){console.log("Cannot convert "+e[n]+" to "+r),i=!1}}}return i},this.getMapOptions=function(){return typeof i!=google.maps&&(i={center:new google.maps.LatLng(51.06966,13.778158),zoom:8}),i},this.setMapData=function(e){if("array"===jQuery.type(e)||"object"===jQuery.type(e))f=e;else if("string"===jQuery.type(e))for(var t=!0;t;){try{f=jQuery.parseJSON(json)}catch(t){if(0!==jQuery(e).length){json=jQuery(e).val();continue}console.log(m.IsNotJson)}t=!1}return jQuery.isEmptyObject(f)||!f.points?console.log(m.MissingMapDataProperty):f.mapOptions&&this.addMapOptions(f.mapOptions),this},this.setMapCanvas=function(t){return n=jQuery(t).get(0),this},this.addLayers=function(t){if("object"==typeof t)for(var e in t)r[e]=new google.maps.KmlLayer({url:t[e],preserveViewport:!0});return this},this.removeLayer=function(t){return t&&r.key&&delete r.key,this},this.addMarker=function(t,e,i,n){if(!g)return console.log(m.MissingMap),this;var r,o=this;if(d.push(new google.maps.Marker({position:t,title:e,icon:i,map:g})),j=d.length-1,s&&s.addMarker(d[j]),!1!==n){n=n||f.points[j].windowContent;google.maps.event.addListener(d[j],"click",(r=j,function(){o.closeInfoWindows();var t=new google.maps.InfoWindow({content:n});t.open(g,d[r]),a[0]=t}))}return this},this.setAllMarkersMap=function(t){for(var e=d.length-1;0<=e;e--)d[e].setMap(t);return this},this.clearMarkers=function(){return this.setAllMarkersMap(null),this},this.deleteMarkers=function(){return this.clearMarkers(),d=[],this},this.showMarkers=function(){return g&&this.setAllMarkersMap(g),this},this.createOverlappingMarkerSpiderfier=function(){return p.initOverlappingMarkerSpiderfier(),g&&(s=new OverlappingMarkerSpiderfier(g,t)),this},this.getOMSOptions=function(){return t},this.drawPolyline=function(t,e,i){var n=[];e&&(f.routes[t]=jQuery.parseJSON(e));for(var r=jQuery.isEmptyObject(f)||jQuery.isEmptyObject(f.routes)||!f.routes[t]?0:Object.keys(f.routes[t]).length,o=0;o<r;o++)f.routes[t][o].lat&&f.routes[t][o].lng&&n.push(new google.maps.LatLng(parseFloat(f.routes[t][o].lat),parseFloat(f.routes[t][o].lng)));var s={path:n,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2};return i&&jQuery.extend(s,i),l[t]=new google.maps.Polyline(s),g&&l[t].setMap(g),this}}};return i}(window,document,jQuery),XIMA.api.openlayers=function(t,e,s,i){var a={},l=[],p=function(i){var n=this;this.map=new ol.Map({target:i.target}),this.addLayer=function(t){n.map.addLayer(t)},this.initialize=function(){if(i.hasOwnProperty("baseLayerUrl")){var t=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:i.attribution||""})],tilePixelRatio:2,url:i.baseLayerUrl}),name:"baseLayer",title:"Base Layer"});n.map.addLayer(t)}if(i.hasOwnProperty("view")){jQuery.extend(i.view,{center:ol.proj.transform([i.view.lon,i.view.lat],"EPSG:4326","EPSG:3857"),zoom:i.view.zoom||7});var e=new ol.View(i.view);n.map.setView(e)}},this.initialize()};return{createMaps:function(t,e,i,n,r){var o;return o={baseLayerUrl:i,view:n,attribution:r},s((a={wrapper:t,map:e}).wrapper).each(function(){s(a.map,s(this)).each(function(){l.push(new p({target:s(this).get(0),baseLayerUrl:o.baseLayerUrl,view:o.view,attribution:o.attribution}))})}),l}}}(window,document,jQuery),XIMA.api.responsiveImages=function(t,e,s,i){var n={};function r(){s(n.wrapper).each(function(){var o={width:s(this).width()};s(n.image,s(this)).each(function(){var t=s(this),e=t.data("srcset").split(","),i=[];for(var n in e)e[n]&&i.push({src:/(?:.(?!\d+w))+/.exec(e[n])[0].trim(),width:/(\d+)(?:w)/.exec(e[n])[1]});for(var r in i.sort(function(t,e){return t.width-e.width}),i){if(i[r].width>=o.width){t.attr("src",i[r].src),t.attr("width",o.width);break}r===i.length-1&&(t.attr("src",i[r].src),t.attr("width",o.width))}})})}return t.onresize=r,{run:function(t,e){n={wrapper:t||"body",image:e||"img"},r()},refresh:function(){r()}}}(window,document,jQuery);