var XIMA={api:{}};XIMA.api.openlayers=function(t,e,i,r){var a={},n=[],o=function(t){var e=this;this.map=new ol.Map({target:t.target}),this.addLayer=function(t){e.map.addLayer(t)},this.initialize=function(){if(t.hasOwnProperty("baseLayerUrl")){var i=new ol.layer.Tile({source:new ol.source.XYZ({attributions:[new ol.Attribution({html:t.attribution||""})],tilePixelRatio:2,url:t.baseLayerUrl}),name:"baseLayer",title:"Base Layer"});e.map.addLayer(i)}if(t.hasOwnProperty("view")){jQuery.extend(t.view,{center:ol.proj.transform([t.view.lon,t.view.lat],"EPSG:4326","EPSG:3857"),zoom:t.view.zoom||7});var r=new ol.View(t.view);e.map.setView(r)}},this.initialize()};return{createMaps:function(t,e,r,s,w){return function(t,e){a={wrapper:t,map:e}}(t,e),function(t){return i(a.wrapper).each(function(){i(a.map,i(this)).each(function(){n.push(new o({target:i(this).get(0),baseLayerUrl:t.baseLayerUrl,view:t.view,attribution:t.attribution}))})}),n}({baseLayerUrl:r,view:s,attribution:w})}}}(window,document,jQuery),XIMA.api.responsiveImages=function(t,e,i,r){function a(){i(n.wrapper).each(function(){var t={width:i(this).width()};i(n.image,i(this)).each(function(){var e=i(this),r=e.data("srcset").split(","),a=[];for(var n in r)r[n]&&a.push({src:/(?:.(?!\d+w))+/.exec(r[n])[0].trim(),width:/(\d+)(?:w)/.exec(r[n])[1]});a.sort(function(t,e){return t.width-e.width});for(var o in a){if(a[o].width>=t.width){e.attr("src",a[o].src),e.attr("width",t.width);break}o===a.length-1&&(e.attr("src",a[o].src),e.attr("width",t.width))}})})}var n={};return t.onresize=a,{run:function(t,e){!function(t,e){n={wrapper:t||"body",image:e||"img"}}(t,e),a()},refresh:function(){a()}}}(window,document,jQuery);