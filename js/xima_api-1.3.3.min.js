var xima={api:{googlemaps:function(){var c=null;var h=null;var e=false;var f=[];var d=[];var a={};var i={};var k={backgroundColor:"String",center:"google.maps.LatLng",disableDefaultUI:"Boolean",disableDoubleClickZoom:"Boolean",draggable:"Boolean",draggableCursor:"String",draggingCursor:"String",heading:"Number",keyboardShortcuts:"Boolean",mapMaker:"Boolean",mapTypeControl:"Boolean",mapTypeControlOptions:"google.maps.MapTypeControlOptions",mapTypeId:"google.maps.MapTypeId",maxZoom:"Number",minZoom:"Number",noClear:"Boolean",overviewMapControl:"Boolean",overviewMapControlOptions:"google.maps.OverviewMapControlOptions",panControl:"Boolean",panControlOptions:"google.maps.PanControlOptions",rotateControl:"Boolean",rotateControlOptions:"google.maps.RotateControlOptions",scaleControl:"Boolean",scaleControlOptions:"google.maps.ScaleControlOptions",scrollwheel:"Boolean",streetView:"google.maps.StreetViewPanorama",streetViewControl:"Boolean",streetViewControlOptions:"google.maps.StreetViewControlOptions",styles:"google.maps.MapTypeStyle",tilt:"Number",zoom:"Number",zoomControl:"Boolean",zoomControlOptions:"google.maps.ZoomControlOptions"};
var b={center:new google.maps.LatLng(51.06966,13.778158),zoom:8};var g={msg:{IsNotJson:"Die angegebene Variable ist keine JSON!",MissingMapDataProperty:"Dem MapData-Object fehlen die benötigten Eigenschaften!",MissingMapCanvas:"Es wird ein Map-Canvas benötigt!",MissingMap:"Fehlende GoogleMaps Instanz!"}};
this.initGoogleMaps=function(l){if(e===true){return;}if(!h){console.log(g.msg.MissingMapCanvas);return;}e=true;c=new google.maps.Map(h,b);this.applyMapData(l);
for(var m in a){if(a.hasOwnProperty(m)){a[m].setMap(c);}}};this.applyMapData=function(m){if(!c){console.log(g.msg.MissingMap);return this;}if(jQuery.isEmptyObject(i)||!i.points){console.log(g.msg.MissingMapDataProperty);
return this;}var m=(typeof m!=="boolean")?true:m;if(m){var l=new google.maps.LatLngBounds();}var s=(!jQuery.isEmptyObject(i)&&i.points)?Object.keys(i.points).length:0;
var r=[];var t;var p;var u;var o;for(var q=0;q<s;q++){if(!i.points[q].lat||!i.points[q].lng){continue;}p=new google.maps.LatLng(parseFloat(i.points[q].lat),parseFloat(i.points[q].lng));
t=(i.points[q].title)?i.points[q].title:"";u=(i.points[q].icon)?i.points[q].icon:null;this.addMarker(p,t,u);o=d.length-1;if(m){l.extend(d[o].position);
}d[o].setMap(c);}if(m&&d.length>0){c.fitBounds(l);var n=google.maps.event.addListener(c,"zoom_changed",function(){if(c.getZoom()>b.zoom){c.setZoom(b.zoom);
}google.maps.event.removeListener(n);});}};this.closeInfoWindows=function(){if(f.length>0){f[0].set("marker",null);f[0].close();f.length=0;}};this.setMapOptions=function(l){if(l){if(xima.api.functions.convertDataType(l,k)){b=l;
}}return this;};this.addMapOptions=function(l){if(l){if(xima.api.functions.convertDataType(l,k)){jQuery.extend(b,l);}}return this;};this.getMapOptions=function(){return b;
};this.setMapData=function(n,l){try{if(l==true){i=jQuery.parseJSON(n);}else{i=jQuery.parseJSON(jQuery(n).val());}}catch(m){console.log(g.msg.IsNotJson);
}if(jQuery.isEmptyObject(i)||!i.points){console.log(g.msg.MissingMapDataProperty);}else{if(i.mapOptions){this.addMapOptions(i.mapOptions);}}return this;
};this.setMapCanvas=function(l){h=jQuery(l).get(0);return this;};this.addLayers=function(l){if(typeof l==="object"){for(var m in l){a[m]=new google.maps.KmlLayer({url:l[m],preserveViewport:true});
}}return this;};this.removeLayer=function(l){if(l&&a.key){delete a.key;}return this;};this.addMarker=function(l,p,o,n){if(!c){console.log(g.msg.MissingMap);
return this;}var m=this;d.push(new google.maps.Marker({position:l,title:p,icon:o,map:c}));j=d.length-1;if(n!==false){var n=(n)?n:i.points[j].windowContent;
google.maps.event.addListener(d[j],"click",function(q){return function(){m.closeInfoWindows();var r=new google.maps.InfoWindow({content:n});r.open(c,d[q]);
f[0]=r;};}(j));}return this;};this.setAllMarkersMap=function(m){for(var l=d.length-1;l>=0;l--){d[l].setMap(m);}return this;};this.clearMarkers=function(){this.setAllMarkersMap(null);
return this;};this.deleteMarkers=function(){this.clearMarkers();d=[];return this;};this.showMarkers=function(){if(c){this.setAllMarkersMap(c);}return this;
};},functions:{convertDataType:function(g,c){if(!c||typeof g!=="object"){return false;}var k=true;for(var f in g){if(!c[f]){continue;}var b=c[f].split(".");
var d;d=window[b[0]];for(var a=1;a<b.length;a++){d=d[b[a]];}if(g[f] instanceof d||typeof g[f]===d){continue;}if(typeof g[f]!==d){try{g[f]=d(g[f]);}catch(h){try{g[f]=new d();
}catch(h){console.log("Cannot convert "+g[f]+" to "+d);k=false;}}}}return k;}}}};