var xima={api:{googlemaps:function(){var c=null;var h=null;var e=false;var f=[];var d=[];var a={};var i={};var b={center:new google.maps.LatLng(51.06966,13.778158),zoom:8};
var g={msg:{IsNotJson:"Die angegebene Variable ist keine JSON!",MissingMapDataProperty:"Dem MapData-Object fehlen die benötigten Eigenschaften!",MissingMapCanvas:"Es wird ein Map-Canvas benötigt!",MissingMap:"Fehlende GoogleMaps Instanz!"}};
this.initGoogleMaps=function(k){if(e===true){return;}if(!h){console.log(g.msg.MissingMapCanvas);return;}e=true;c=new google.maps.Map(h,b);this.applyMapData(k);
for(var l in a){if(a.hasOwnProperty(l)){a[l].setMap(c);}}};this.applyMapData=function(l){if(!c){console.log(g.msg.MissingMap);return this;}if(jQuery.isEmptyObject(i)||!i.points){console.log(g.msg.MissingMapDataProperty);
return this;}var l=(typeof l!=="boolean")?true:l;if(l){var k=new google.maps.LatLngBounds();}var r=(!jQuery.isEmptyObject(i)&&i.points)?Object.keys(i.points).length:0;
var q=[];var s;var o;var t;var n;for(var p=0;p<r;p++){if(!i.points[p].lat||!i.points[p].lng){continue;}o=new google.maps.LatLng(parseFloat(i.points[p].lat),parseFloat(i.points[p].lng));
s=(i.points[p].title)?i.points[p].title:"";t=(i.points[p].icon)?i.points[p].icon:null;this.addMarker(o,s,t);n=d.length-1;if(l){k.extend(d[n].position);
}d[n].setMap(c);}if(l&&d.length>0){c.fitBounds(k);var m=google.maps.event.addListener(c,"zoom_changed",function(){if(c.getZoom()>b.zoom){c.setZoom(parseInt(b.zoom));
}google.maps.event.removeListener(m);});}};this.closeInfoWindows=function(){if(f.length>0){f[0].set("marker",null);f[0].close();f.length=0;}};this.setMapOptions=function(k){if(k){b=k;
}return this;};this.addMapOptions=function(k){if(k){jQuery.extend(b,k);}return this;};this.getMapOptions=function(){return b;};this.setMapData=function(m,k){try{if(k==true){i=jQuery.parseJSON(m);
}else{i=jQuery.parseJSON(jQuery(m).val());}}catch(l){console.log(g.msg.IsNotJson);}if(jQuery.isEmptyObject(i)||!i.points){console.log(g.msg.MissingMapDataProperty);
}else{if(i.mapOptions){this.addMapOptions(i.mapOptions);}}return this;};this.setMapCanvas=function(k){h=jQuery(k).get(0);return this;};this.addLayers=function(k){if(typeof k==="object"){for(var l in k){a[l]=new google.maps.KmlLayer({url:k[l],preserveViewport:true});
}}return this;};this.removeLayer=function(k){if(k&&a.key){delete a.key;}return this;};this.addMarker=function(k,o,n,m){if(!c){console.log(g.msg.MissingMap);
return this;}var l=this;d.push(new google.maps.Marker({position:k,title:o,icon:n,map:c}));j=d.length-1;if(m!==false){var m=(m)?m:i.points[j].windowContent;
google.maps.event.addListener(d[j],"click",function(p){return function(){l.closeInfoWindows();var q=new google.maps.InfoWindow({content:m});q.open(c,d[p]);
f[0]=q;};}(j));}return this;};this.setAllMarkersMap=function(l){for(var k=d.length-1;k>=0;k--){d[k].setMap(l);}return this;};this.clearMarkers=function(){this.setAllMarkersMap(null);
return this;};this.deleteMarkers=function(){this.clearMarkers();d=[];return this;};this.showMarkers=function(){if(c){this.setAllMarkersMap(c);}return this;
};}}};